/* LÃ³gico_1: */

CREATE TABLE user_endereco_user (
    id_user INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100),
    tp_user VARCHAR(100),
    username VARCHAR(100),
    cpf VARCHAR(15),
    email VARCHAR(100),
    senha VARCHAR(50),
    dt_nasc DATE,
    num_telefone VARCHAR(15),
    estado VARCHAR(100),
    cep VARCHAR(15),
    cidade VARCHAR(100),
    rua VARCHAR(100)
);

CREATE TABLE ingrediente (
    id_ingrediente INT AUTO_INCREMENT PRIMARY KEY,
    nome_ingrediente VARCHAR(100),
    dt_validade DATE,
    preco_compra VARCHAR(50)
);

CREATE TABLE pizza (
    id_pizza INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100)
);

CREATE TABLE pizza_montada (
    id_pizza_montada INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100),
    data_montagem DATE
);

CREATE TABLE possui (
    fk_ingrediente_id_ingrediente INT,
    fk_pizza_id_pizza INT
);

CREATE TABLE monta (
    fk_user_endereco_user_id_user INT,
    fk_pizza_montada_id_pizza_montada INT
);

CREATE TABLE pede (
    fk_user_endereco_user_id_user INT,
    fk_pizza_id_pizza INT
);
 
ALTER TABLE possui ADD CONSTRAINT FK_possui_1
    FOREIGN KEY (fk_ingrediente_id_ingrediente)
    REFERENCES ingrediente (id_ingrediente)
    ON DELETE RESTRICT;
 
ALTER TABLE possui ADD CONSTRAINT FK_possui_2
    FOREIGN KEY (fk_pizza_id_pizza)
    REFERENCES pizza (id_pizza)
    ON DELETE RESTRICT;
 
ALTER TABLE monta ADD CONSTRAINT FK_monta_1
    FOREIGN KEY (fk_user_endereco_user_id_user)
    REFERENCES user_endereco_user (id_user)
    ON DELETE SET NULL;
 
ALTER TABLE monta ADD CONSTRAINT FK_monta_2
    FOREIGN KEY (fk_pizza_montada_id_pizza_montada)
    REFERENCES pizza_montada (id_pizza_montada)
    ON DELETE SET NULL;
 
ALTER TABLE pede ADD CONSTRAINT FK_pede_1
    FOREIGN KEY (fk_user_endereco_user_id_user)
    REFERENCES user_endereco_user (id_user)
    ON DELETE SET NULL;
 
ALTER TABLE pede ADD CONSTRAINT FK_pede_2
    FOREIGN KEY (fk_pizza_id_pizza)
    REFERENCES pizza (id_pizza)
    ON DELETE SET NULL;